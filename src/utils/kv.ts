export type Env={USER_DB:KVNamespace;QBANK_DB:KVNamespace}; export const userKey=(tid:number)=>`user:${tid}`; export const qbankKey=(id:string)=>`qbank:${id}`; export const DB={ async getUser(env:Env,tid:number){const raw=await env.USER_DB.get(userKey(tid));return raw?JSON.parse(raw):null;}, async putUser(env:Env,tid:number,data:any){await env.USER_DB.put(userKey(tid),JSON.stringify(data));}, async getQ(env:Env,id:string){const raw=await env.QBANK_DB.get(qbankKey(id));return raw?JSON.parse(raw):null;}, async putQ(env:Env,id:string,data:any){await env.QBANK_DB.put(qbankKey(id),JSON.stringify(data));}, async listQ(env:Env,prefix='qbank:'){const list=await env.QBANK_DB.list({prefix}); return list.keys.map(k=>(k.name as string).replace(/^qbank:/,''));} };\n