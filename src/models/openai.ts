export async function openaiInfer(key:string|undefined,model:string,input:string){ if(!key) throw new Error('OPENAI_KEY missing'); const res=await fetch('https://api.openai.com/v1/chat/completions',{method:'POST',headers:{'content-type':'application/json','authorization':`Bearer ${key}`},body:JSON.stringify({model,messages:[{role:'user',content:input}],temperature:0.2})}); if(!res.ok) throw new Error(`OpenAI ${res.status}`); const data:any=await res.json(); return data.choices?.[0]?.message?.content ?? '';}\n