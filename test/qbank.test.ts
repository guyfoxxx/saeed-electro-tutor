import assert from 'assert/strict'; import { addQuestion, getQuestion, listQuestions } from '../src/telegram/handlers/qbank'; const fakeKV=new Map<string,string>(); const env:any={ USER_DB:{}, QBANK_DB:{ get:async(k:string)=>fakeKV.get(k)||null, put:async(k:string,v:string)=>{fakeKV.set(k,v)}, list:async({prefix}:{prefix:string})=>({keys:[...fakeKV.keys()].filter((k:string)=>k.startsWith(prefix)).map((name:string)=>({name}))}) } }; await addQuestion(env,{id:'q1',level:1,q:'Ohm?',a:'V=IR'}); const q=await getQuestion(env,'q1'); assert.equal(q.a,'V=IR'); const ids=await listQuestions(env); assert.equal(ids[0],'q1'); console.log('qbank.test OK');\n